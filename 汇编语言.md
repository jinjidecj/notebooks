# 汇编语言

[toc]

## 1.基础知识

| 概念     | 解释                                 |
| -------- | :----------------------------------- |
| 机器指令 | 一台机器可以正确执行的命令           |
| 机器语言 | 机器指令的集合                       |
| 汇编指令 | 机器指令便于记忆的书写格式           |
| 汇编语言 | 汇编指令的集合                       |
| CPU      | central processing unit 中央控制单元 |
| 寄存器   | CPU 中可以存储数据的器件             |
| 编译器   | 将汇编指令转化为机器指令的翻译程序   |

汇编语言的组成：

+ 汇编指令：机器码助记符，有对应的机器码
+ 伪指令：没有对应的机器码，由编译器执行，计算机不执行
+ 其他符号：如+，-，*，/等，由编译器识别，没有对应的机器码

CPU与外部器件的3类信息交互：

+ 存储单元的地址（地址信息）
+ 器件的选择，读或写的命令
+ 读或写的数据（数据信息）

| 概念                            | 解释                                                         |
| ------------------------------- | ------------------------------------------------------------ |
| 总线                            | 导线的集合，导线用于传输电信号。地址总线，控制总线，数据总线 |
| 地址总线                        | 一个CPU有N根地址线，则CPU的地址总线的宽度为N，可以寻找2^N个内存单元 |
| 数据总线                        | 数据总线的宽度，决定了CPU和外界的数据传输速度，8根数据总线一次可以传送一个8位二进制数据 |
| 控制总线                        | 不同控制线的集合，其宽度决定了CPU对外部器件的控制能力        |
| 随机存储器(RAM)                 | 可读可写，带电存储，关机后存储的内容消失                     |
| 只读存储器(ROM)                 | 只能读取不能写入，关机后内容不丢失                           |
| BIOS(Basic Input/Output System) | 基本输入/输出系统，主板和各类插口卡（显卡，网卡等）产商提供的软件系统，可以通过它利用该硬件设备进行最基本的输入输出 |

显卡上的ROM中存储着显卡的BIOS，显卡上的RAM，一般称为显存，随时将显卡中的数据向显示器上输出，将要显示的内容写入显存，就会在显示器上显示。

## 2.寄存器

8086CPU的寄存器都是16位的。

通用寄存器：AX，BX，CX，DX，用来存放一般性的数据。

AX的低八位构成AL寄存器，高八位构成AH寄存器。BCDX也一样。

AL与AH作为独立的寄存器来使用，AL进行操作后的进位会丢弃，不会保存在AH中。

8086可处理的数据：

+ 字节：byte，8位
+ 字：word，两个字节组成

**汇编指令和寄存器名称大小写不敏感**

在进行数据传送或运算时，要注意指令的两个对象的位数一致。

**8086CPU给出物理地址的方法**

​	8086CPU有20位地址总线，CPU通过提供两个16位的地址，使用地址加法器转换为20位地址送入地址总线中：**物理地址=段地址*16+偏移地址=基础地址+偏移地址**	

​	数据在21F60H内存单元中：对于8086PC机要这样表示：

	+ 数据在内存2000:1F60单元中
	+ 数据在内存的2000H段中的1F60H单元

8086CPU中有四个段存储器：CS、DS、SS、ES

| 概念                | 解释                 |
| ------------------- | -------------------- |
| CS                  | 代码段寄存器         |
| IP                  | 指令指针寄存器       |
| 转移指令            | 用于设置CS、IP的值   |
| 传送指令            | mov                  |
| jump 某一合法寄存器 | 用寄存器中的值修改IP |

CPU将CS:IP 指向的内容当做指令执行

[win10环境下运行debug程序](https://gaozhiyuan.me/assembly/run-debug-in-win10.html)

**DEGUB指令**

| 指令 | 解释                                     |
| ---- | ---------------------------------------- |
| R    | 查看、改变CPU寄存器的内容                |
| D    | 查看内存中的内容                         |
| E    | 改写内存中的内容                         |
| U    | 将内存中的机器指令翻译成汇编指令         |
| T    | 执行一条机器指令                         |
| A    | 以汇编指令的格式在内存中写入一条机器指令 |

##  3.寄存器（内存访问）

| 概念     | 解释                                     |
| -------- | ---------------------------------------- |
| 字节单元 | 一个单元存放一个字节                     |
| 字单元   | 存放一个字的内存单元，由两个字节单元组成 |
| DS寄存器 | 存放要访问数据的段地址                   |

[...]：一个内存单元

[0] 表示内存单元的偏移地址

**8086CPU不支持将数据直接送入DS**

数据--->通用寄存器--->段寄存器

