[toc]

# 1. 概述

## 1.1 什么是操作系统

### 定义

没有公认的精确定义

操作系统是一个控制程序

+ 一个系统软件
+ 控制程序执行过程，防止错误和计算机的不当使用
+ 执行用户程序，给用户程序提供各种服务
+ 方便用户使用计算机系统

操作系统是一个资源管理器

+ 应用程序与硬件之间的中间层
+ 管理各种计算机软硬件资源
+ 提供访问计算机软硬件资源的高效手段
+ 解决资源访问冲突，确保资源公平使用

### 操作系统软件的组成

+ shell - 命令行接口
  + 通过键盘操作，方便用户进行命令输入
+ GUI - 图形用户接口
  + WIMP (视窗window，图标icon，选单menu，指标point)
  + 直接操作所见即所得
+ Kernel - 操作系统的内部
  + 执行各种资源管理等功能

### 操作系统内核特征

+ 并发  
  + 计算机系统中同时存在多个运行的程序，需要OS管理和调度
+ 共享
  + “同时”访问
  + 互斥共享
+ 虚拟
  + 利用多道程序设计技术，让每个用户都觉得有一个计算机专门为他服务
+ 异步
  + 程序的执行不是一管到底，而是走走停停，向前推进的速度不可预知
  + 只要运行环境相同，OS需要保证程序运行的结果也相同

## 1.2 操作系统结构

### 分层结构

+ 将操作系统分为多层
  + 每层建立在低层之上
  + 最底层（layer 0）是硬件
  + 最高层（layer N）是用户界面
+ 每一层仅使用更低一层的功能（操作）和服务

### 微内核结构

+ 尽可能把内核功能移到用户空间
+ 用户模块间的通信使用消息传递
+ 好处：灵活、安全
+ 缺点：性能

### 外核结构

+ 让内核分配机器的物理资源给多个应用程序，并让每个程序决定如何处理这些资源

+ 程序能链接到操作系统库(libOS)实现了操作系统抽象

+ 保护与控制分离

## 1.3 x86-32 内存架构

**地址**是访问内存空间的索引

**物理内存地址空间**是处理器提交到总线上用于访问计算机系统中的内存和外设的最终地址。一个计算机系统中只有一个物理地址空间。

**线性地址空间**是在操作系统的虚拟管理之下每个运行的应用程序能访问的地址空间。每个运行的应用程序都认为自己独享整个计算机系统的地址空间，这样可以让多个运行的应用程序之间互相隔离。

**逻辑地址空间**是应用程序直接使用的地址空间。

> 段机制启动、页机制未启动：逻辑地址-->段机制处理-->线性地址==物理地址
>
> 段机制和页机制都启动：逻辑地址-->段机制处理-->线性地址-->页机制处理-->物理地址

# 2.中断、异常和系统调用

